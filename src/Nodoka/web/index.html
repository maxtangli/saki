<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nodoka dev</title>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
    var conn = new WebSocket('ws://localhost:8080');
    conn.onopen = init;
    conn.onmessage = receive;

    function init() {
        addLog("Connection established!");
    }

    function send() {
        var command = $('#command').val();
        conn.send(command);
    }

    function receive(response) {
        var jsonString = response.data;
        addLog(jsonString);
        render(jsonString);
    }

    function addLog(text) {
        var log = $('#log');
        var newVal = log.val() + text + '\n\n';
        log.val(newVal);
    }

    function render(jsonString) {
        var data = JSON.parse(jsonString);
        if (data.isError) {
            return;
        }

        var s = '';

        // areas
        var areas = data.areas;
        for (actor of ['E','S','W','N']) {
            var area = areas.actor;

            s += actor + ':'

            s += '<input type="button" value="' + actor +'" onclick=""/>'

            s += '<br/>';
        }

        $('#gui').html(s);
    }
</script>

server response log<br/>
<textarea id="log" style="margin: 0px; width: 596px; height: 250px;"></textarea>
<br/>

free command input<br/>
<input id="command" type="text" value="type command here"/>
<input type="button" value="send" onclick="send()"/>
<br/>

gui<br/>
<div id="gui">

</div>

</body>
</html>